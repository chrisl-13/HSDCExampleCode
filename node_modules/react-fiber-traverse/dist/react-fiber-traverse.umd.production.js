!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],r):r((e=e||self).reactFiberTraverse={},e.React)}(this,function(e,r){"use strict";function t(e,r){var t,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=r.call(e,i)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function n(e){var r="function"==typeof Symbol&&e[Symbol.iterator],t=0;return r?r.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}function o(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,a=t.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(o)throw o.error}}return i}function a(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(o(arguments[r]));return e}function i(e,r){function o(){var r,n,o;return t(this,function(t){switch(t.label){case 0:return c?[3,2]:[4,e];case 1:void 0!==(r=t.sent())&&(u=void 0===(n=r.skipChild)?u:n,s=void 0===(o=r.skipSibling)?s:o),t.label=2;case 2:return[2]}})}function a(){return t(this,function(r){switch(r.label){case 0:return u||null===e.child?[3,2]:[5,n(i(e.child,{order:g,skipSiblingForStartNode:!1,skipSelfForStartNode:!1}))];case 1:r.sent(),r.label=2;case 2:return[2]}})}function l(){return t(this,function(r){switch(r.label){case 0:return s||null===e.sibling?[3,2]:[5,n(i(e.sibling,{order:g,skipSiblingForStartNode:!1,skipSelfForStartNode:!1}))];case 1:r.sent(),r.label=2;case 2:return[2]}})}var u,s,c,f,d,p,h,y,v,b,m=void 0===r?{}:r,w=m.order,g=void 0===w?["self","child","sibling"]:w,C=m.skipSiblingForStartNode,x=void 0===C||C,S=m.skipSelfForStartNode,F=void 0!==S&&S;return t(this,function(e){switch(e.label){case 0:u=!1,s=x,c=F,f={self:o,child:a,sibling:l},d=g.map(function(e){return f[e]}).filter(function(e){return void 0!==e}),e.label=1;case 1:e.trys.push([1,6,7,8]),p=n(d),h=p.next(),e.label=2;case 2:return h.done?[3,5]:[5,n((0,h.value)())];case 3:e.sent(),e.label=4;case 4:return h=p.next(),[3,2];case 5:return[3,8];case 6:return y=e.sent(),v={error:y},[3,8];case 7:try{h&&!h.done&&(b=p.return)&&b.call(p)}finally{if(v)throw v.error}return[7];case 8:return[2]}})}function l(e){return"string"==typeof e.type||null===e.type}function u(e){return!l(e)}function s(e){return"string"==typeof e||null===e}function c(e){return!s(e)&&(void 0!==e.prototype&&e.prototype instanceof r.Component)}function f(e){return e.hasOwnProperty("_reactRootContainer")&&e._reactRootContainer.hasOwnProperty("_internalRoot")}var d=Object.freeze({isNodeHtmlLike:l,isNodeNotHtmlLike:u,isNodeFunctionComponent:function(e){return u(e)&&null===e.stateNode},isNodeComponentClass:function(e){return u(e)&&e.stateNode instanceof r.Component},isConstructorHtmlLike:s,isConstructorComponentClass:c,isConstructorFunctionComponent:function(e){return"function"==typeof e&&!c(e)},doesElementContainRootFiberNode:f,getRootFiberNodeFromDOM:function e(r){var t,o;if(void 0===r&&(r=document.body),f(r))return r._reactRootContainer._internalRoot.current;var a=null;try{for(var i=n([].slice.call(r.children)),l=i.next();!l.done;l=i.next())if(null!==(a=e(l.value)))return a}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return a}});function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e,r){return e(r={exports:{}},r.exports),r.exports}var y=h(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var n=[];if(""!==(e=function e(r,n,f){var y=[],v=!1;function b(){var e=n.match(t);if(!e)throw new Error("Expected name, found "+n);var r=e[0];return n=n.substr(r.length),d(r)}function m(e){for(;p(n.charAt(e));)e++;n=n.substr(e)}function w(e){for(var r=0;"\\"===n.charAt(--e);)r++;return 1==(1&r)}for(m(0);""!==n;){var g=n.charAt(0);if(p(g))v=!0,m(1);else if(g in i)y.push({type:i[g]}),v=!1,m(1);else if(","===g){if(0===y.length)throw new Error("Empty sub-selector");r.push(y),y=[],v=!1,m(1)}else if(v&&(y.length>0&&y.push({type:"descendant"}),v=!1),"*"===g)n=n.substr(1),y.push({type:"universal"});else if(g in l){var C=l[g],x=C[0],S=C[1];n=n.substr(1),y.push({type:"attribute",name:x,action:S,value:b(),ignoreCase:!1})}else if("["===g){var F=(n=n.substr(1)).match(o);if(!F)throw new Error("Malformed attribute selector: "+n);n=n.substr(F[0].length);var N=d(F[1]);f&&("lowerCaseAttributeNames"in f?!f.lowerCaseAttributeNames:f.xmlMode)||(N=N.toLowerCase()),y.push({type:"attribute",name:N,action:a[F[2]],value:d(F[4]||F[5]||""),ignoreCase:!!F[6]})}else if(":"===g){if(":"===n.charAt(1)){n=n.substr(2),y.push({type:"pseudo-element",name:b().toLowerCase()});continue}n=n.substr(1);var k=b().toLowerCase(),F=null;if("("===n.charAt(0))if(u.has(k)){var A=n.charAt(1),E=c.has(A);if(n=n.substr(E?2:1),n=e(F=[],n,f),E){if(n.charAt(0)!==A)throw new Error("Unmatched quotes in :"+k);n=n.substr(1)}if(")"!==n.charAt(0))throw new Error("Missing closing parenthesis in :"+k+" ("+n+")");n=n.substr(1)}else{for(var _=1,j=1;j>0&&_<n.length;_++)"("!==n.charAt(_)||w(_)?")"!==n.charAt(_)||w(_)||j--:j++;if(j)throw new Error("Parenthesis not matched");if(F=n.substr(1,_-2),n=n.substr(_),s.has(k)){var A=F.charAt(0);A===F.slice(-1)&&c.has(A)&&(F=F.slice(1,-1)),F=d(F)}}y.push({type:"pseudo",name:k,data:F})}else{if(!t.test(n))return y.length&&"descendant"===y[y.length-1].type&&y.pop(),h(r,y),n;var O=b();f&&("lowerCaseTags"in f?!f.lowerCaseTags:f.xmlMode)||(O=O.toLowerCase()),y.push({type:"tag",name:O})}}return h(r,y),n}(n,e+"",r)))throw new Error("Unmatched selector: "+e);return n};var t=/^(?:\\.|[\w\-\u00b0-\uFFFF])+/,n=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,o=/^\s*((?:\\.|[\w\u00b0-\uFFFF-])+)\s*(?:(\S?)=\s*(?:(['"])([^]*?)\3|(#?(?:\\.|[\w\u00b0-\uFFFF-])*)|)|)\s*(i)?\]/,a={undefined:"exists","":"equals","~":"element","^":"start",$:"end","*":"any","!":"not","|":"hyphen"},i={">":"child","<":"parent","~":"sibling","+":"adjacent"},l={"#":["id","equals"],".":["class","element"]},u=new Set(["has","not","matches"]),s=new Set(["contains","icontains"]),c=new Set(['"',"'"]);function f(e,r,t){var n=parseInt(r,16)-65536;return n!=n||t?r:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)}function d(e){return e.replace(n,f)}function p(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function h(e,r){if(e.length>0&&0===r.length)throw new Error("Empty sub-selector");e.push(r)}});p(y);var v=h(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t={equals:"",element:"~",start:"^",end:"$",any:"*",not:"!",hyphen:"|"},n={child:" > ",parent:" < ",sibling:" ~ ",adjacent:" + ",descendant:" ",universal:"*"};function o(e){return e.map(a).join(", ")}function a(e){return e.map(i).join("")}function i(e){if(e.type in n)return n[e.type];if("tag"===e.type)return l(e.name);if("pseudo-element"===e.type)return"::"+l(e.name);if("attribute"===e.type)return"exists"===e.action?"["+l(e.name)+"]":"id"!==e.name||"equals"!==e.action||e.ignoreCase?"class"!==e.name||"element"!==e.action||e.ignoreCase?"["+l(e.name)+t[e.action]+"='"+l(e.value)+"'"+(e.ignoreCase?"i":"")+"]":"."+l(e.value):"#"+l(e.value);if("pseudo"===e.type)return null===e.data?":"+l(e.name):"string"==typeof e.data?":"+l(e.name)+"("+e.data+")":":"+l(e.name)+"("+o(e.data)+")";throw new Error("Unknown type")}function l(e){return e}r.default=o});p(v);var b=h(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(y),r.parse=y.default,r.stringify=v.default});p(b);var m=b.parse;function w(e,r){var o,l,s,c,f,d,p,h,y,v,b,g,C,x,S,F,N,k,A,E,_,j,O,M,P,R,L;return t(this,function(t){switch(t.label){case 0:if(o="string"==typeof r?m(r,{lowerCaseTags:!1,lowerCaseAttributeNames:!1}):r,!(o.length>1))return[3,9];t.label=1;case 1:t.trys.push([1,6,7,8]),l=n(o),s=l.next(),t.label=2;case 2:return s.done?[3,5]:[5,n(w(e,[s.value]))];case 3:t.sent(),t.label=4;case 4:return s=l.next(),[3,2];case 5:return[3,8];case 6:return c=t.sent(),_={error:c},[3,8];case 7:try{s&&!s.done&&(j=l.return)&&j.call(l)}finally{if(_)throw _.error}return[7];case 8:return[2];case 9:if(0===(f=o[0]).length)return[2];for(d=[e],p=0,h=void 0;p<f.length;){y=[];try{for(O=void 0,v=n(d),b=v.next();!b.done;b=v.next())if(g=b.value,["tag"].includes((C=f[p]).type)){if(x={skipSelfForStartNode:!0,skipSiblingForStartNode:!0},S={},void 0===h||"descendant"===h.type?S={skipChild:!1,skipSibling:!1}:"child"===h.type?S={skipChild:!0}:"sibling"===h.type&&(S={skipChild:!0,skipSibling:!0},x.skipSiblingForStartNode=!1),F=i(g,x),"tag"==C.type)for(A=void 0;!(P=F.next(S),A=P.value,P).done;)u(A)&&A.type.name===C.name&&y.push(A)}else["descendant","child"].includes(C.type)?(h=C,y.push.apply(y,a(d))):h=void 0}catch(e){O={error:e}}finally{try{b&&!b.done&&(M=v.return)&&M.call(v)}finally{if(O)throw O.error}}d=y,p+=1}t.label=10;case 10:t.trys.push([10,15,16,17]),N=n(d),k=N.next(),t.label=11;case 11:return k.done?[3,14]:[4,A=k.value];case 12:t.sent(),t.label=13;case 13:return k=N.next(),[3,11];case 14:return[3,17];case 15:return E=t.sent(),R={error:E},[3,17];case 16:try{k&&!k.done&&(L=N.return)&&L.call(N)}finally{if(R)throw R.error}return[7];case 17:return[2]}})}e.Utils=d,e.findNodeByComponent=function(e,r,t){var o,a;if(null===e)return null;var l=i(e,t);try{for(var s=n(l),c=s.next();!c.done;c=s.next()){var f=c.value;if(u(f)&&f.type===r)return f}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return null},e.findNodeByComponentName=function(e,r,t){var o,a;if(null===e)return null;var l=i(e,t);try{for(var s=n(l),c=s.next();!c.done;c=s.next()){var f=c.value;if(u(f)&&f.type.name===r)return f}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return null},e.findNodeByComponentRef=function(e,r,t){var o,a;if(null===e)return null;var l=i(e,t);try{for(var s=n(l),c=s.next();!c.done;c=s.next()){var f=c.value;if(u(f)&&f.stateNode===r)return f}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return null},e.matchAll=function(e,r){return a(w(e,r))},e.matchFirst=function(e,r){var t=w(e,r),n=t.next();return t.throw&&t.throw(new Error("Cleanup")),n.done?null:n.value},e.matchGenerator=w,e.traverse=function(e,r,t){var o,a,l=i(e,t);try{for(var u=n(l),s=u.next();!s.done;s=u.next())r.call(null,s.value)}catch(e){o={error:e}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}},e.traverseGenerator=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-fiber-traverse.umd.production.js.map
